<?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pjmike.lundao.mapper.UserMapper">
	<!-- <select id="findUserByName" parameterType="String" resultType="com.pjmike.lundao.po.User2">
		select * from users where username = #{username}
	</select>
	<insert id="addUser" parameterType="com.pjmike.lundao.po.User2">
		insert into users(username,password) values(#{username},#{password})
	</insert>
	<update id="pudateUser" parameterType="com.pjmike.lundao.po.User2">
	update users set username=#{username}, password=#{password}
	</update> -->
	
	<resultMap type="com.pjmike.lundao.po.User" id="ResultOne">
		<result column="nickname" property="nickname"/>
		<result column="Icon" property="Icon"/>
	</resultMap>
	
	<!-- 保存用户的头像与用户名 -->
	<insert id="insertUser" parameterType="com.pjmike.lundao.po.User"  useGeneratedKeys="true" keyProperty="id">
		insert into user(openid,nickname,Icon) values(#{openid},#{nickname},#{Icon})
	</insert>
	<!-- 更新用户的信息 -->
	<insert id="updateUser" parameterType="com.pjmike.lundao.po.User">
		update user set nickname=#{nickname} and Icon=#{Icon}
	</insert>
	
	
	<!-- 根据用户id查询用户头像与nickname -->	
	<select id="selectNicknameAndIcon" parameterType="int" resultMap="ResultOne">
		select nickname,Icon from user where id =#{id}
	</select>
	<select id="selectUser" parameterType="String" resultType="com.pjmike.lundao.po.User">
		select * from user where openid = #{value}
	</select>
	<select id="findUserByname" parameterType="String" resultType="com.pjmike.lundao.po.User">
		select * from user where nickname=#{value}
	</select>
</mapper>